#include <string>
#include <vector>
#include <memory>

// Door class - allows passage through walls
class Door : public Building {
private:
    bool isOpen;
    int closedDefenseBonus;
    
public:
    Door(Player* owner, Tile* location)
        : Building(25, 15, 2, "Door", owner, location),
          isOpen(false), closedDefenseBonus(3) {}
    
    bool getIsOpen() const { return isOpen; }
    int getClosedDefenseBonus() const { return closedDefenseBonus; }
    
    void toggleDoor() {
        isOpen = !isOpen;
    }
    
    // When door is open, units can pass through
    // When door is closed, it provides defense bonus
    int getCurrentDefenseBonus() const {
        return isOpen ? 0 : closedDefenseBonus;
    }
    
    void update(int turn) override {
        // Doors might automatically close at night or under attack
        // This would depend on game mechanics
    }
    
    std::string getDescription() const override {
        std::string status = isOpen ? "Open" : "Closed";
        return Building::getDescription() + " - Status: " + status;
    }
};
